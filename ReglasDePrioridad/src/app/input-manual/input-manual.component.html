<meta name="viewport" content="width=device-width, initial-scale=1">
<div class="col-lg-2">
</div>
<div class="col-lg-10">
  <!--<input id="is3dCheckBox" type="checkbox" checked="checked" />-->

  <div *ngIf="estado">


    <br />


    <div class="inputs">
      <!-- (click) passes input value to add() and then clears the input -->

    </div>

    <div class="table-responsive-xl">
      <table class="table">

        <thead>
          <tr id="miTablaPersonalizada">
            <th scope="col">
              <h4>N</h4>
            </th>
            <th scope="col">
              <h4>O.F.</h4>
            </th>

            <th scope="col">
              <h4></h4>
            </th>

            <th scope="col"></th>
            <th scope="col"></th>
            <th scope="col"></th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let pie of datosInput; let numero of nPiezas">
            <th>
              <h5>{{nPiezas[pie.id-1]}}</h5>
            </th>
            <th>
              <h5>O.F &nbsp; {{pie.id}}</h5>
            </th>
            <!--div *ngIf="valores"> Valor: &nbsp; {{pie.valor}} </div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                              <div *ngIf="tiempoEsperado"> Tiempo Esperado: &nbsp;{{pie.tiempoEsperado}} </div>-->

            <th><button type="button" class="btn2 btn-sm btn-dark  sharp btn-block " (click)="envia(pie)">Añade
                fase</button></th>
            <th><button type="button" class="btn2 btn-sm btn-dark  sharp btn-block "
                (click)="eliminaOT(pie.id) ">Elimina OT</button></th>
            <th></th>
            <th></th>
          </tr>

        </tbody>
      </table>
    </div>
    <button class="btn2 btn-sm btn-dark  sharp btn-block" (click)="add(valor, tiempoes)">
      Añadir
    </button>
    <br><br><br><br><br><br>
    <div *ngIf="controlEjecucion">

      <div *ngIf="!verEjecucion">
        <div *ngIf="loading">
          <div class="loader"></div>
        </div>

        <div class="table-responsive-xl">
          <table class="table">

            <thead>
              <tr id="miTablaPersonalizada2">

                <th scope="col">
                  <h4>ALGORITMOS</h4>
                </th>

                <th scope="col">
                  <h4></h4>
                </th>
                <th scope="col"></th>
                <th scope="col"></th>
                <th scope="col"></th>

              </tr>
            </thead>
            <tbody>
              <tr>
                <th *ngIf="isSpt"><input type="checkbox" checked="checked" (click)="spt()"> SPT</th>
                <th *ngIf="!isSpt"><input type="checkbox" (click)="spt()"> SPT</th>

                <th *ngIf="isLpt"><input type="checkbox" checked="checked" (click)="lpt()"> LPT</th>
                <th *ngIf="!isLpt"><input type="checkbox" (click)="lpt()"> LPT</th>

                <th *ngIf="isFifo"><input type="checkbox" checked="checked" (click)="fifo()"> FIFO</th>
                <th *ngIf="!isFifo"><input type="checkbox" (click)="fifo()"> FIFO</th>

                <th *ngIf="isAlea"><input type="checkbox" checked="checked" (click)="aleatorio()"> Aleatorio</th>
                <th *ngIf="!isAlea"><input type="checkbox" (click)="aleatorio()"> Aleatorio</th>
              </tr>
              <tr>

                <th *ngIf="isEdd"><input type="checkbox" checked="checked" (click)="edd()"> EDD</th>
                <th *ngIf="!isEdd"><input type="checkbox" (click)="edd()"> EDD</th>

                <th *ngIf="isWinq"><input type="checkbox" checked="checked" (click)="wWinq()"> WINQ</th>
                <th *ngIf="!isWinq"><input type="checkbox" (click)="wWinq()"> WINQ</th>

                <th *ngIf="isMaValor"><input type="checkbox" checked="checked" (click)="mayorValor()"> Mayor Valor O.F
                </th>
                <th *ngIf="!isMaValor"><input type="checkbox" (click)="mayorValor()"> Mayor Valor O.F</th>

                <th *ngIf="isTiempoRes"><input type="checkbox" checked="checked" (click)="mayorTiempo()">Mayor Tiempo
                  Restante</th>
                <th *ngIf="!isTiempoRes"><input type="checkbox" (click)="mayorTiempo()">Mayor Tiempo Restante</th>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="table-responsive-xl">
          <table class="table">

            <thead>
              <tr id="miTablaPersonalizada2">

                <th scope="col">
                  <h4></h4>
                </th>

                <th scope="col">
                  <h4></h4>
                </th>
                <th scope="col"></th>
                <th scope="col"></th>
                <th scope="col"></th>
                <th scope="col"></th>

              </tr>
            </thead>
            <tbody>
              <th><button type="button" class="btn2 btn-sm btn-dark  sharp btn-block" (click)="Selccionartodos()">
                  Selccionar todos
                </button></th>
              <th><button type="button" class="btn2 btn-sm btn-dark  sharp btn-block" (click)="DeSelccionartodos()">
                  Deselccionar todos
                </button></th>

            </tbody>
          </table>
        </div>




        <br>
        <br>
        <br>
        <button type="button" class="btn2 btn-sm btn-dark  sharp btn-block" (click)="createEjecucion()">
          Ejecutar
        </button>

        <div *ngIf="errorPost">
          <br>

          <h5>Fallo en envío de información, por favor revise los datos y vuelva a intentar.</h5>
        </div>


      </div>
      <div *ngIf="verEjecucion">
        <button type="button" class="btn2 btn-sm btn-dark  sharp btn-block" routerLink="/tabla-resultados/{{idEje}}">Ver
          ejecución</button><br />

      </div>
      <br />
      <br />
    </div>
  </div>


  <div *ngIf="!estado">
    <br>
    <div *ngIf="valores">


      <div class="table-responsive-xl">
        <table class="table">

          <thead>
            <tr id="miTablaPersonalizada2">

              <th scope="col">
                <h4>Valor</h4>
              </th>

              <th scope="col">
                <h4></h4>
              </th>
              <th scope="col"></th>
              <th scope="col"></th>
              <th scope="col"></th>

            </tr>
          </thead>
          <tbody>



            <th><input #valor type="number" min=0 value="{{dato.valor}}"></th>
            <th><button type="button" class="btn2 btn-sm btn-dark sharp btn-block "
                (click)="guardarValor(valor.value)">Actualizar</button></th>
            <th></th>
            <th></th>


          </tbody>
        </table>
      </div>
    </div>

    <div *ngIf="tiempoEsperado">

      <div class="table-responsive-xl">
        <table class="table">

          <thead>
            <tr id="miTablaPersonalizada2">

              <th scope="col">
                <h4>Plazo de Entrega</h4>
              </th>

              <th scope="col">
                <h4></h4>
              </th>
              <th scope="col"></th>
              <th scope="col"></th>
              <th scope="col"></th>

            </tr>
          </thead>
          <tbody>



            <th><input #tiempoes type="number" min=0 value="{{dato.tiempoEsperado}}"></th>

            <th><button type="button" class="btn2 btn-sm btn-dark sharp btn-block "
                (click)="guardarTiempoEsperado(tiempoes.value)">Actualizar</button></th>
            <th></th>


          </tbody>
        </table>
      </div>


      <h3>Introducir nuevos parámetros</h3>
      <div class="table-responsive-xl">
        <table class="table">

          <thead>
            <tr id="miTablaPersonalizada2">

              <th scope="col">
                <h4>C.T</h4>
              </th>

              <th scope="col">
                <h4>Tiempo</h4>
              </th>
              <th scope="col"></th>
              <th scope="col"></th>
              <th scope="col"></th>

            </tr>
          </thead>
          <tbody>

            <th> <input #Maquina type="number"></th>

            <th> <input #Tiempo type="number"> </th>
            <th><button type="button" class=" btn2 btn-sm btn-dark  sharp btn-block "
                (click)="CrearFase(Maquina.value, Tiempo.value)">Crear</button><br /></th>


          </tbody>
        </table>
      </div>

      <h3>Parámetros</h3>
    </div>






    <br />
    <!--<button type="button" class=" btn-dark sharp btn-block " (click)="cancelar(dato.id)"  >Cancelar</button><br/>-->

  </div>
</div>
<!--<div class="col-lg-1"  >
      </div>-->
<div *ngIf="!estado">
  <div class="col-lg-2">
  </div>
  <div class="col-lg-3">

    <div *ngFor="let pie of dato.maquinas ; index as i">
      <div class="margen">
        O.T {{i+1}}
        &nbsp;&nbsp; &nbsp;&nbsp;
        C.T <input #Maquina type="number" min=0 value="{{pie}}" (change)="actualizaMaquina(Maquina.value)">
        <br />
        <br />
        <br />
      </div>
    </div>
    <button type="button" class="btn2 btn-sm btn-dark sharp btn-block " (click)="guardar(dato.id)">Volver</button><br />

  </div>

  <div class="col-lg-2">
    <div *ngFor="let pie of dato.tiempos">

      Tiempo <input #Tiempo type="number" min=0 value="{{pie}}" (change)="actualizaTiempo(Tiempo.value)">
      <br />
      <br />
      <br />
    </div>
  </div>

  <div class="col-lg-2">
    <div *ngFor="let pie of dato.index">

      <button type="button" class=" btn2 btn-sm btn-dark  sharp btn-block "
        (click)="ActualizarFase(0, 2,pie)">Modificar</button><br />

      <br />
    </div>
  </div>
  <div class="col-lg-1">
    <div *ngFor="let pie of dato.index">

      <button type="button" class=" btn2 btn-sm btn-dark  sharp btn-block "
        (click)="EliminarFase(pie)">Eliminar</button><br />

      <br />
    </div>


  </div>
</div>